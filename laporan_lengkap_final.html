<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Laporan Perhitungan Lengkap</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: 'Times New Roman', serif; padding: 40px; color: #000; line-height: 1.5; font-size: 14px; }
        .container { max-width: 210mm; margin: 0 auto; background: white; }
        
        h1 { font-size: 18pt; text-transform: uppercase; margin: 0; }
        h2 { font-size: 14pt; border-bottom: 2px solid black; margin-top: 35px; padding-bottom: 5px; font-weight: bold; }
        h3 { font-size: 12pt; font-weight: bold; margin-top: 25px; margin-bottom: 10px; }
        
        table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
        th, td { border: 1px solid black; padding: 6px 8px; text-align: center; }
        th { background: #f0f0f0; }
        td.left { text-align: left; }
        
        /* Kotak Perhitungan (Abu-abu) */
        .calc-box { 
            background: #f5f5f5; 
            border: 1px dashed #666; 
            padding: 12px; 
            margin-bottom: 20px; 
            font-size: 11pt; 
            font-family: Arial, sans-serif;
        }
        .calc-title { font-weight: bold; text-decoration: underline; margin-bottom: 8px; display: block; font-size: 10pt; }
        .example-row { color: #000; font-family: 'Courier New', monospace; font-weight: bold; display: block; margin-top: 5px; }
        
        @media print { .no-print { display: none; } }
    </style>
</head>
<body>
    <div class="container">
        
        <div style="display: flex; justify-content: space-between; border-bottom: 3px double black; padding-bottom: 10px; margin-bottom: 20px;">
            <div>
                <h1>Laporan Analisis SPK</h1>
                <i>Metode: Decision Tree (C4.5) & COPRAS</i>
            </div>
            <div style="text-align: right;">
                <b>BINTANG JAYA MOTOR</b><br>
                Honda Vario 150 | 55,000 km
            </div>
        </div>

        <h2>I. HASIL DIAGNOSA (DECISION TREE)</h2>
        
        <h3>A. Fakta Input ($X$)</h3>
        <table>
            <tr>
                <td class="left" width="25%"><b>Nama Kendaraan</b></td>
                <td>Honda Vario 150</td>
                <td class="left" width="25%"><b>Jarak Tempuh</b></td>
                <td>55,000 km</td>
            </tr>
            <tr>
                <td class="left"><b>Usia Kendaraan</b></td>
                <td>5 Tahun</td>
                <td class="left"><b>Gejala Utama</b></td>
                <td><b>Getaran CVT Parah</b></td>
            </tr>
        </table>

        <h3>B. Perhitungan Entropy (Contoh Sampel Node)</h3>
        <p>Sistem menghitung ketidakmurnian data (Entropy) pada simpul gejala "Getaran CVT Parah".</p>
        
        <div class="calc-box">
            <span class="calc-title">Rumus Entropy:</span>
            $$ Entropy(S) = \sum_{i=1}^{c} -p_i \log_2 p_i $$
            
            <span class="calc-title" style="margin-top:10px;">Implementasi Angka (Sampel Distribusi Data):</span>
            Misalkan dari 10 data historis dengan gejala serupa:
            <ul style="margin: 5px 0 10px 20px; font-size: 10pt;">
                <li>3 Kasus Ringan ($p_1 = 0.3$)</li>
                <li>5 Kasus Sedang ($p_2 = 0.5$)</li>
                <li>2 Kasus Tinggi ($p_3 = 0.2$)</li>
            </ul>

            <span class="example-row">
                E = - (0.3 × log2(0.3)) - (0.5 × log2(0.5)) - (0.2 × log2(0.2))<br>
                E = - (0.3 × -1.737) - (0.5 × -1.000) - (0.2 × -2.322)<br>
                E = - (-0.521) - (-0.500) - (-0.464)<br>
                E = <b>1.4855</b>
            </span>
        </div>

        <h3>C. Hasil Inferensi (Trace Log)</h3>
        <table>
            <thead>
                <tr>
                    <th>Tahapan</th>
                    <th>Logika Sistem</th>
                    <th>Keputusan</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td class="left">Cek <b>Gejala Utama</b> pada Root Node</td>
                    <td>Terdeteksi</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td class="left">Hitung Information Gain tertinggi dari atribut (Usia/KM)</td>
                    <td>Cabang Usia</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td class="left">Validasi Rule: <i>IF Usia > 3 Tahun THEN Risk = High</i></td>
                    <td><b>Sedang</b></td>
                </tr>
            </tbody>
        </table>


        <h2>II. PERHITUNGAN REKOMENDASI (COPRAS)</h2>
        <p>Perhitungan perankingan paket servis berdasarkan kriteria yang telah ditentukan.</p>

        
        
        <h3>Tahap 1: Matriks Keputusan ($X$)</h3>
        <table>
            <thead>
                <tr>
                    <th>Alternatif</th>
                    
                    <th>C1. Jenis Keluhan</th>
                    
                    <th>C2. Harga</th>
                    
                    <th>C3. Jarak Tempuh</th>
                    
                    <th>C4. Usia Kendaraan</th>
                    
                </tr>
            </thead>
            <tbody>
                
                <tr>
                    <td class="left">Paket Standar</td>
                    
                    <td>4</td>
                    
                    <td>1</td>
                    
                    <td>3</td>
                    
                    <td>3</td>
                    
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Bulanan</td>
                    
                    <td>3</td>
                    
                    <td>1</td>
                    
                    <td>4</td>
                    
                    <td>4</td>
                    
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Lengkap</td>
                    
                    <td>4</td>
                    
                    <td>1</td>
                    
                    <td>3</td>
                    
                    <td>3</td>
                    
                </tr>
                
                <tr style="background:#eee; font-weight:bold;">
                    <td class="left">TOTAL ($\sum X$)</td>
                    
                    <td>11</td>
                    
                    <td>3</td>
                    
                    <td>10</td>
                    
                    <td>10</td>
                    
                </tr>
            </tbody>
        </table>

        <h3>Tahap 2: Normalisasi Matriks ($R$)</h3>
        <div class="calc-box">
            <span class="calc-title">Rumus & Implementasi Angka (Baris 1, Kolom 1):</span>
            $$ r_{ij} = \frac{x_{ij}}{\sum_{i=1}^{m} x_{ij}} $$
            <span class="example-row">
                r11 = 4 / 11 = <b>0.3636</b>
            </span>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Alt</th>
                    
                    <th>C1. Jenis Keluhan</th>
                    
                    <th>C2. Harga</th>
                    
                    <th>C3. Jarak Tempuh</th>
                    
                    <th>C4. Usia Kendaraan</th>
                    
                </tr>
            </thead>
            <tbody>
                
                <tr>
                    <td class="left">Paket Standar</td>
                    
                    <td>0.3636</td>
                    
                    <td>0.3333</td>
                    
                    <td>0.3000</td>
                    
                    <td>0.3000</td>
                    
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Bulanan</td>
                    
                    <td>0.2727</td>
                    
                    <td>0.3333</td>
                    
                    <td>0.4000</td>
                    
                    <td>0.4000</td>
                    
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Lengkap</td>
                    
                    <td>0.3636</td>
                    
                    <td>0.3333</td>
                    
                    <td>0.3000</td>
                    
                    <td>0.3000</td>
                    
                </tr>
                
            </tbody>
        </table>

        <h3>Tahap 3: Normalisasi Terbobot ($D$)</h3>
        <div class="calc-box">
            <span class="calc-title">Rumus & Implementasi Angka (Baris 1, Kolom 1):</span>
            $$ y_{ij} = r_{ij} \times w_j $$
            Bobot ($w_1$) = 0.4<br>
            <span class="example-row">
                y11 = 0.3636 × 0.4 = <b>0.1455</b>
            </span>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Alt</th>
                    
                    <th>C1. Jenis Keluhan</th>
                    
                    <th>C2. Harga</th>
                    
                    <th>C3. Jarak Tempuh</th>
                    
                    <th>C4. Usia Kendaraan</th>
                    
                </tr>
            </thead>
            <tbody>
                
                <tr>
                    <td class="left">Paket Standar</td>
                    
                    <td>0.1455</td>
                    
                    <td>0.1000</td>
                    
                    <td>0.0450</td>
                    
                    <td>0.0450</td>
                    
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Bulanan</td>
                    
                    <td>0.1091</td>
                    
                    <td>0.1000</td>
                    
                    <td>0.0600</td>
                    
                    <td>0.0600</td>
                    
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Lengkap</td>
                    
                    <td>0.1455</td>
                    
                    <td>0.1000</td>
                    
                    <td>0.0450</td>
                    
                    <td>0.0450</td>
                    
                </tr>
                
            </tbody>
        </table>

        <h3>Tahap 4: Nilai Max ($S_+$) & Min ($S_-$)</h3>
        <div class="calc-box">
            <span class="calc-title">Implementasi Angka (Alternatif 1):</span>
            $$ S_+ = \sum \text{Benefit} \quad ; \quad S_- = \sum \text{Cost} $$
            <span class="example-row">
                S+ = 0.1455 + 0.1000 = <b>0.2455</b><br>
                S- = 0.0450 + 0.0450 = <b>0.0900</b>
            </span>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Alternatif</th>
                    <th>Benefit ($S_+$)</th>
                    <th>Cost ($S_-$)</th>
                </tr>
            </thead>
            <tbody>
                
                <tr>
                    <td class="left">Paket Standar</td>
                    <td>0.2455</td>
                    <td>0.0900</td>
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Lengkap</td>
                    <td>0.2455</td>
                    <td>0.0900</td>
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Bulanan</td>
                    <td>0.2091</td>
                    <td>0.1200</td>
                </tr>
                
                <tr style="background:#eee; font-weight:bold">
                    <td class="left">TOTAL ($S_-$)</td>
                    <td>-</td>
                    <td>0.3000</td>
                </tr>
            </tbody>
        </table>

        <h3>Tahap 5: Bobot Relatif ($Q_i$)</h3>
        <div class="calc-box">
            <span class="calc-title">Implementasi Angka (Alternatif 1):</span>
            $$ Q_i = S_{+i} + \frac{\sum S_{-}}{S_{-i} \times \sum \frac{1}{S_{-}}} $$
            <span class="example-row">
                Q1 = 0.2455 + ( 0.3000 / ( 0.0900 × 30.5556 ) )<br>
                Q1 = <b>0.3545</b>
            </span>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Alternatif</th>
                    <th>Nilai $Q_i$</th>
                </tr>
            </thead>
            <tbody>
                
                <tr>
                    <td class="left">Paket Standar</td>
                    <td>0.3545</td>
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Lengkap</td>
                    <td>0.3545</td>
                </tr>
                
                <tr>
                    <td class="left">Paket Servis Bulanan</td>
                    <td>0.2909</td>
                </tr>
                
            </tbody>
        </table>

        <h3>Tahap 6: Utilitas ($U_i$) & Perankingan</h3>
        <div class="calc-box">
            <span class="calc-title">Implementasi Angka (Alternatif 1):</span>
            $$ U_i = \frac{Q_i}{Q_{max}} \times 100\% $$
            <span class="example-row">
                U1 = ( 0.3545 / 0.3545 ) × 100 = <b>100.00%</b>
            </span>
        </div>
        <table>
            <thead>
                <tr style="background:#333; color:black;">
                    <th>Rank</th>
                    <th>Alternatif</th>
                    <th>Harga Asli</th>
                    <th>Skor Akhir ($U_i$)</th>
                </tr>
            </thead>
            <tbody>
                
                <tr>
                    <td><b>#1</b></td>
                    <td class="left"><b>Paket Standar</b></td>
                    <td style="text-align:right;">Rp 150.000</td>
                    <td><b>100.00%</b></td>
                </tr>
                
                <tr>
                    <td><b>#2</b></td>
                    <td class="left"><b>Paket Servis Lengkap</b></td>
                    <td style="text-align:right;">Rp 225.000</td>
                    <td><b>100.00%</b></td>
                </tr>
                
                <tr>
                    <td><b>#3</b></td>
                    <td class="left"><b>Paket Servis Bulanan</b></td>
                    <td style="text-align:right;">Rp 185.000</td>
                    <td><b>82.05%</b></td>
                </tr>
                
            </tbody>
        </table>

        

        <div class="no-print" style="text-align:center; margin-top:40px;">
            <button onclick="window.print()" style="padding:10px 20px; font-weight:bold;">Cetak Laporan PDF</button>
        </div>

    </div>
</body>
</html>